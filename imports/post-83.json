{
    "comments": [],
    "tags": ["linux", "php"],
    "title": "Fork a Process in PHP",
    "html": "<p>The other day I ran into a need to \"fork\" a process in a web\napp. Basically I needed to trigger a long-running process but\nimmediately show the user a screen that said \"running\". I used a\nversion of the following.</p>\n<div class=\"geshifilter\">\n<pre class=\"php geshifilter-php\">\n<span class=\"kw2\">function</span> forkExec<span class=\"br0\">(</span><span class=\"re0\">$command</span><span class=\"br0\">)</span> <span class=\"br0\">{</span>\n        <span class=\"kw1\">if</span><span class=\"br0\">(</span><span class=\"kw3\">stripos</span><span class=\"br0\">(</span><span class=\"kw4\">PHP_OS</span><span class=\"sy0\">,</span> <span class=\"st_h\">'win'</span><span class=\"br0\">)</span> <span class=\"sy0\">!==</span> <span class=\"kw4\">false</span><span class=\"br0\">)</span> <span class=\"br0\">{</span>\n                <span class=\"re0\">$command</span> <span class=\"sy0\">=</span> <span class=\"st0\">\"start /b <span class=\"es4\">$command</span>\"</span><span class=\"sy0\">;</span>\n        <span class=\"br0\">}</span>\n        <span class=\"kw1\">else</span> <span class=\"br0\">{</span>\n                <span class=\"re0\">$command</span> <span class=\"sy0\">.=</span> <span class=\"st_h\">' > /dev/null &amp;'</span><span class=\"sy0\">;</span>\n        <span class=\"br0\">}</span>\n        <span class=\"kw1\">return</span> <span class=\"kw3\">pclose</span><span class=\"br0\">(</span><span class=\"kw3\">popen</span><span class=\"br0\">(</span><span class=\"re0\">$command</span><span class=\"sy0\">,</span> <span class=\"st_h\">'r'</span><span class=\"br0\">)</span><span class=\"br0\">)</span><span class=\"sy0\">;</span>\n<span class=\"br0\">}</span>\n</pre></div>\n<p>In windows `start /b` starts the given command in the\nbackground. On Linux, `> /dev/null` supresses output and `&amp;`\nruns the given command in the background.</p>",
    "timestamp": 1312956000000,
    "slug": "fork-a-process-in-php",
    "nid": 83
}